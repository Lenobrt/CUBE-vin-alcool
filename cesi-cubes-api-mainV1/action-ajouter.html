<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ajouter un article</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
     <style>
      .logo {
        width: 40px;
        filter: invert(100%) sepia(100%) saturate(13%) hue-rotate(237deg)
          brightness(104%) contrast(104%);
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="/"
          ><img src="logo.svg" class="logo" /> Negosud</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="ms-auto navbar-nav">
            <a class="nav-item nav-link active" href="action-liste.html">Articles</a>
            <a class="nav-item nav-link" href="categ-list.html">Catégories</a>
            <a class="nav-item nav-link" href="user-list.html">Utilisateurs</a>
          </div>
          <a class="ms-2 btn btn-outline-secondary">ratio<i class="fa-solid fa-right-from-bracket"></i></a>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="col-3 my-5">
        <h1>Ajouter un article</h1>
        <form id="ajouter-article-form">
          <div class="mb-3">
            <label for="nom" class="form-label required">Nom</label>
            <input type="text" id="nom" name="nom" required="required" maxlength="255" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="prixunite" class="form-label">Prix Unité</label>
            <input type="number" id="prixunite" name="prixunite" required="required" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="prixpack" class="form-label">Prix Pack</label>
            <input type="number" id="prixpack" name="prixpack" required="required" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="paysproduction" class="form-label required">Pays de Production</label>
            <input type="text" id="paysproduction" name="paysproduction" required="required" maxlength="50" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="regionproduction" class="form-label required">Région de Production</label>
            <input type="text" id="regionproduction" name="regionproduction" required="required" maxlength="50" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="anneeproduction" class="form-label required">Année de Production</label>
            <input type="number" id="anneeproduction" name="anneeproduction" required="required" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="quantite" class="form-label required">Quantité</label>
            <input type="number" id="quantite" name="quantite" required="required" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="quantiteminimum" class="form-label required">Quantité Minimum</label>
            <input type="number" id="quantiteminimum" name="quantiteminimum" required="required" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="idfamille" class="form-label required">ID Famille</label>
            <input type="number" id="idfamille" name="idfamille" required="required" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="iddomaine" class="form-label required">ID Domaine</label>
            <input type="number" id="iddomaine" name="iddomaine" required="required" class="form-control" />
          </div>
          <button class="btn btn-success" type="submit">Ajouter</button>
        </form>
      </div>
    </div>
    <footer class="py-5 bg-dark">
      <div class="container px-4 px-lg-5">
        <p class="m-0 text-center text-white">
          Copyright &copy; CESI 2024
        </p>
      </div>
    </footer>

    <!-- Inclure Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Configurer Axios -->
    <script>
    axios.defaults.baseURL = 'http://127.0.0.1:8000/api';
    axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('token')}`;

    document.getElementById('ajouter-article-form').addEventListener('submit', function(event) {
      event.preventDefault();
      const articleData = {
        nom: document.getElementById('nom').value,
        prixunite: document.getElementById('prixunite').value,
        prixpack: document.getElementById('prixpack').value,
        paysproduction: document.getElementById('paysproduction').value,
        regionproduction: document.getElementById('regionproduction').value,
        anneeproduction: document.getElementById('anneeproduction').value,
        quantite: document.getElementById('quantite').value,
        quantiteminimum: document.getElementById('quantiteminimum').value,
        idfamille: document.getElementById('idfamille').value,
        iddomaine: document.getElementById('iddomaine').value,
      };

      axios.post('/articles', articleData)
        .then(response => {
          alert('Article ajouté avec succès');
          window.location.href = 'action-liste.html';
        })
        .catch(error => console.error('Erreur lors de l\'ajout de l\'article', error));
    });
    </script>
  </body>
</html>
